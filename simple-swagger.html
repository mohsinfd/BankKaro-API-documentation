<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BankKaro Partner API Documentation</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui.css" />
    <style>
        html { box-sizing: border-box; overflow: -moz-scrollbars-vertical; overflow-y: scroll; }
        *, *:before, *:after { box-sizing: inherit; }
        body { margin:0; background: #fafafa; }
        .swagger-ui .topbar { background-color: #2c3e50; }
        .swagger-ui .topbar .download-url-wrapper .select-label { color: #fff; }
        .swagger-ui .info .title { color: #2c3e50; }
        .swagger-ui .scheme-container { background: #f8f9fa; margin: 0 0 20px; padding: 20px 0; box-shadow: 0 1px 2px 0 rgba(0,0,0,.15); }
    </style>
</head>
<body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-standalone-preset.js"></script>
    <script>
        window.onload = function() {
            // Inline OpenAPI spec to avoid any file loading issues
            const spec = {
                "openapi": "3.0.0",
                "info": {
                    "title": "BankKaro Partner API",
                    "description": "API documentation for BankKaro Partner services including CardGenius, LoanGenius, and EducationGenius",
                    "version": "1.0.0",
                    "contact": {
                        "name": "BankKaro API Support",
                        "email": "support@bankkaro.com"
                    }
                },
                "servers": [
                    {
                        "url": "https://uat-partner.bankkaro.com",
                        "description": "UAT Environment"
                    },
                    {
                        "url": "https://prod-partner.bankkaro.com",
                        "description": "Production Environment"
                    }
                ],
                "components": {
                    "securitySchemes": {
                        "partnerToken": {
                            "type": "apiKey",
                            "in": "header",
                            "name": "partner-token",
                            "description": "JWT token obtained from /partner/token endpoint"
                        }
                    },
                    "responses": {
                        "UnauthorizedError": {
                            "description": "Access token is missing or invalid",
                            "content": {
                                "application/json": {
                                    "schema": {
                                        "type": "object",
                                        "properties": {
                                            "status": { "type": "string", "example": "error" },
                                            "message": { "type": "string", "example": "Unauthorized access" }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [{ "partnerToken": [] }],
                "paths": {
                    "/partner/auth": {
                        "post": {
                            "tags": ["Partner APIs"],
                            "summary": "Partner Authentication",
                            "description": "Authenticate a partner and get access token",
                            "operationId": "partner-auth",
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "properties": {
                                                "mobile": { "type": "string", "description": "Mobile number for authentication" },
                                                "otp": { "type": "string", "description": "One-time password for verification" }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {
                                    "description": "Successful response",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "object",
                                                "properties": {
                                                    "status": { "type": "string" },
                                                    "message": { "type": "string" },
                                                    "data": { "type": "object" }
                                                }
                                            }
                                        }
                                    }
                                },
                                "401": { "$ref": "#/components/responses/UnauthorizedError" }
                            }
                        }
                    }
                }
            };

            const ui = SwaggerUIBundle({
                spec: spec,
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [SwaggerUIBundle.presets.apis, SwaggerUIStandalonePreset],
                plugins: [SwaggerUIBundle.plugins.DownloadUrl],
                layout: "StandaloneLayout",
                validatorUrl: null,
                docExpansion: "list",
                filter: true,
                showRequestHeaders: true,
                showCommonExtensions: true,
                tryItOutEnabled: true,
                requestInterceptor: function(request) {
                    const token = localStorage.getItem('partner-token');
                    if (token) {
                        request.headers['partner-token'] = token;
                    }
                    return request;
                },
                onComplete: function() {
                    const tokenInput = `
                        <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 4px;">
                            <label for="token-input" style="font-weight: bold; margin-right: 10px;">Partner Token:</label>
                            <input type="text" id="token-input" placeholder="Enter your JWT token" 
                                   style="width: 300px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <button onclick="setToken()" style="margin-left: 10px; padding: 8px 15px; background: #2c3e50; color: white; border: none; border-radius: 4px; cursor: pointer;">Set Token</button>
                            <button onclick="clearToken()" style="margin-left: 10px; padding: 8px 15px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">Clear Token</button>
                        </div>
                    `;
                    document.querySelector('.swagger-ui .scheme-container').insertAdjacentHTML('afterend', tokenInput);
                    
                    const savedToken = localStorage.getItem('partner-token');
                    if (savedToken) {
                        document.getElementById('token-input').value = savedToken;
                    }
                }
            });
        };

        function setToken() {
            const token = document.getElementById('token-input').value;
            if (token) {
                localStorage.setItem('partner-token', token);
                alert('Token saved! It will be automatically included in API requests.');
            }
        }

        function clearToken() {
            localStorage.removeItem('partner-token');
            document.getElementById('token-input').value = '';
            alert('Token cleared!');
        }
    </script>
</body>
</html> 